diff --git a/linux518.patch b/linux518.patch
index aa0dd86..ac30e4d 100644
--- a/linux518.patch
+++ b/linux518.patch
@@ -1,7 +1,7 @@
 diff -u -r r8168-8.050.00/src/r8168_n.c r8168-8.050.00-linux518/src/r8168_n.c
 --- r8168-8.050.00/src/r8168_n.c	2022-05-06 09:48:25.000000000 +0000
 +++ r8168-8.050.00-linux518/src/r8168_n.c	2022-05-24 21:31:05.802807395 +0000
-@@ -3698,9 +3698,15 @@
+@@ -3714,9 +3714,15 @@
          txd->opts2 = 0;
          while (1) {
                  memset(tmpAddr, pattern++, len - 14);
@@ -17,7 +17,7 @@ diff -u -r r8168-8.050.00/src/r8168_n.c r8168-8.050.00-linux518/src/r8168_n.c
                  txd->opts1 = cpu_to_le32(DescOwn | FirstFrag | LastFrag | len);
  
                  RTL_W32(tp, RxConfig, RTL_R32(tp, RxConfig)  | AcceptMyPhys);
-@@ -3726,7 +3732,11 @@
+@@ -3742,7 +3748,11 @@
                  if (rx_len == len) {
                          dma_sync_single_for_cpu(tp_to_dev(tp), le64_to_cpu(rxd->addr), tp->rx_buf_sz, DMA_FROM_DEVICE);
                          i = memcmp(skb->data, rx_skb->data, rx_len);
@@ -29,7 +29,7 @@ diff -u -r r8168-8.050.00/src/r8168_n.c r8168-8.050.00-linux518/src/r8168_n.c
                          if (i == 0) {
  //              dev_printk(KERN_INFO, tp_to_dev(tp), "loopback test finished\n",rx_len,len);
                                  break;
-@@ -26403,11 +26413,20 @@
+@@ -26445,11 +26455,20 @@
  
          if ((sizeof(dma_addr_t) > 4) &&
              use_dac &&
@@ -50,3 +50,12 @@ diff -u -r r8168-8.050.00/src/r8168_n.c r8168-8.050.00-linux518/src/r8168_n.c
                  if (rc < 0) {
  #if LINUX_VERSION_CODE > KERNEL_VERSION(2,6,0)
                          if (netif_msg_probe(tp))
+@@ -29987,7 +30006,7 @@
+         spin_lock_irqsave(&tp->lock, flags);
+ 
+         /* restore last modified mac address */
+-        rtl8168_rar_set(tp, dev->dev_addr);
++        rtl8168_rar_set(tp, (uint8_t*)dev->dev_addr);
+ 
+         spin_unlock_irqrestore(&tp->lock, flags);
+ 
