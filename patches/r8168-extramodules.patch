diff --git a/PKGBUILD b/PKGBUILD
index 8233808..53b2fc3 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -23,7 +23,7 @@ source=("https://github.com/mtorromeo/r8168/archive/refs/tags/$pkgver.tar.gz"
         'linux517.patch' 'linux518.patch')
 sha256sums=('2b12d932e976f8f74b8d9545744c04beb4676dd7bc1d032dde51347ed1d8be24'
             '6c718137bed0f80bce52cc6862e755de7a1d0c2cbb75491ab5b099bd04534c1c'
-            'd8d542770e504775600f686d03412a37cc32489872be7aeb388b5b08d9806096')
+            '7c903df79d9bcb98ba6013ae1e756befc4eb9e071142bf8bb34a53c15034123a')
 
 install=$_pkgname.install
 
diff --git a/linux518.patch b/linux518.patch
index aa0dd86..cd4d5c7 100644
--- a/linux518.patch
+++ b/linux518.patch
@@ -1,7 +1,7 @@
 diff -u -r r8168-8.050.00/src/r8168_n.c r8168-8.050.00-linux518/src/r8168_n.c
 --- r8168-8.050.00/src/r8168_n.c	2022-05-06 09:48:25.000000000 +0000
 +++ r8168-8.050.00-linux518/src/r8168_n.c	2022-05-24 21:31:05.802807395 +0000
-@@ -3698,9 +3698,15 @@
+@@ -3661,9 +3661,15 @@
          txd->opts2 = 0;
          while (1) {
                  memset(tmpAddr, pattern++, len - 14);
@@ -17,7 +17,7 @@ diff -u -r r8168-8.050.00/src/r8168_n.c r8168-8.050.00-linux518/src/r8168_n.c
                  txd->opts1 = cpu_to_le32(DescOwn | FirstFrag | LastFrag | len);
  
                  RTL_W32(tp, RxConfig, RTL_R32(tp, RxConfig)  | AcceptMyPhys);
-@@ -3726,7 +3732,11 @@
+@@ -3689,7 +3695,11 @@
                  if (rx_len == len) {
                          dma_sync_single_for_cpu(tp_to_dev(tp), le64_to_cpu(rxd->addr), tp->rx_buf_sz, DMA_FROM_DEVICE);
                          i = memcmp(skb->data, rx_skb->data, rx_len);
@@ -29,7 +29,19 @@ diff -u -r r8168-8.050.00/src/r8168_n.c r8168-8.050.00-linux518/src/r8168_n.c
                          if (i == 0) {
  //              dev_printk(KERN_INFO, tp_to_dev(tp), "loopback test finished\n",rx_len,len);
                                  break;
-@@ -26403,11 +26413,20 @@
+@@ -24162,9 +24172,9 @@
+ 
+         spin_lock_irqsave(&tp->lock, flags);
+ 
+-        memcpy(dev->dev_addr, addr->sa_data, dev->addr_len);
++        memcpy((uint8_t*)dev->dev_addr, addr->sa_data, dev->addr_len);
+ 
+-        rtl8168_rar_set(tp, dev->dev_addr);
++        rtl8168_rar_set(tp, (uint8_t*)dev->dev_addr);
+ 
+         spin_unlock_irqrestore(&tp->lock, flags);
+ 
+@@ -25152,11 +25162,20 @@
  
          if ((sizeof(dma_addr_t) > 4) &&
              use_dac &&
@@ -50,3 +62,12 @@ diff -u -r r8168-8.050.00/src/r8168_n.c r8168-8.050.00-linux518/src/r8168_n.c
                  if (rc < 0) {
  #if LINUX_VERSION_CODE > KERNEL_VERSION(2,6,0)
                          if (netif_msg_probe(tp))
+@@ -28649,7 +28668,7 @@
+         spin_lock_irqsave(&tp->lock, flags);
+ 
+         /* restore last modified mac address */
+-        rtl8168_rar_set(tp, dev->dev_addr);
++        rtl8168_rar_set(tp, (uint8_t*)dev->dev_addr);
+ 
+         spin_unlock_irqrestore(&tp->lock, flags);
+ 
